<!DOCTYPE html>

<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>GENESIS – Analyseur Regex</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- DSFR -->

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.13.1/dist/dsfr/dsfr.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.13.1/dist/dsfr/utility/utilities.min.css">

  <style>
    body { background: #fff; padding: 1rem; }
    .split {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
    }
    textarea {
      min-height: 320px;
      font-family: monospace;
    }
    .results {
      min-height: 320px;
      border: 1px solid var(--border-default-grey);
      padding: 1rem;
      background: var(--background-alt-grey);
      overflow-y: auto;
    }
  </style>

</head>

<body>
  <div class="fr-container">
    <h1 class="fr-h3">GENESIS</h1>
    <p class="fr-text--sm">
      Outil d’analyse de texte par expressions régulières.
      <br>
      Traitement 100 % JavaScript – compatible widget Grist.
    </p>

```
<div class="split fr-mt-3w">

  <!-- COLONNE GAUCHE -->
  <div>
    <label class="fr-label" for="inputText">Texte à analyser</label>
    <textarea id="inputText" class="fr-input" placeholder="Collez ici le texte brut…"></textarea>

    <fieldset class="fr-fieldset fr-mt-2w">
      <legend class="fr-fieldset__legend">Types d’éléments à extraire</legend>

      <div class="fr-checkbox-group">
        <input type="checkbox" id="chk-ip">
        <label for="chk-ip">Adresses IP</label>
      </div>

      <div class="fr-checkbox-group">
        <input type="checkbox" id="chk-mail">
        <label for="chk-mail">Adresses e-mail</label>
      </div>
    </fieldset>

    <button id="btn-analyze" class="fr-btn fr-mt-2w">
      Analyser
    </button>
  </div>

  <!-- COLONNE DROITE -->
  <div>
    <h2 class="fr-h5">Résultats</h2>
    <div id="results" class="results fr-text--sm">
      Aucun résultat pour le moment.
    </div>
  </div>

</div>
```

  </div>

  <!-- DSFR JS -->

  <script src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.13.1/dist/dsfr/dsfr.module.min.js" type="module"></script>

  <script src="https://cdn.jsdelivr.net/npm/@gouvfr/dsfr@1.13.1/dist/dsfr/dsfr.nomodule.min.js" nomodule></script>

  <script>
    // Regex utilisées (copiables dans Grist)
    const REGEX_IP = /\b(?:\d{1,3}\.){3}\d{1,3}\b/g;
    const REGEX_MAIL = /\b[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}\b/g;

    document.getElementById('btn-analyze').addEventListener('click', () => {
      const text = document.getElementById('inputText').value;
      const wantIP = document.getElementById('chk-ip').checked;
      const wantMail = document.getElementById('chk-mail').checked;
      const output = document.getElementById('results');

      output.innerHTML = '';

      if (!wantIP && !wantMail) {
        output.textContent = '⚠️ Sélectionnez au moins un type d’analyse.';
        return;
      }

      let results = [];

      if (wantIP) {
        const ips = text.match(REGEX_IP) || [];
        results.push(`<strong>Adresses IP (${ips.length})</strong><br>${ips.join('<br>') || 'Aucune'}`);
      }

      if (wantMail) {
        const mails = text.match(REGEX_MAIL) || [];
        results.push(`<strong>Adresses e-mail (${mails.length})</strong><br>${mails.join('<br>') || 'Aucune'}`);
      }

      output.innerHTML = results.join('<br><br>');
    });
  </script>

</body>
</html>
